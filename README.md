## 写在前面
这是我学习时候写的程序，如果做的不好请不要喷。


## 1.主要玩法：
本程序为一个简易的控制台飞机大战游戏。敌人会定时随机在上方出现，并且定时发射子弹。玩家要躲避子弹以及敌人。在撞到敌人或者子弹后会使对方消失，自己进入数秒的无敌状态。然后扣除一点生命。分数累积分为击败得分和存活时长得分的和，击败敌机得1000分，存活每秒10分左右（因为受场上对象数量和渲染函数影响较大）。在开始前可以选择难度，在结束后也可以选择重新开始。


## 2.	程序设计


本程序主要分为逻辑部分和渲染部分，主函数只负责串联和输入部分。
逻辑部分由更新函数和实体类(玩家类，敌人类，子弹类)组成，渲染部分为三个渲染函数,分别为游戏前的菜单渲染函数，游戏时的渲染函数，游戏后结束的渲染函数。


### 2.1.	实体类以及更新函数


实体类：
实体类有三个类：玩家类，敌人类，子弹类，所有实体类都有x，y坐标参数，对于子弹来讲是子弹坐标，对于敌人和玩家为中心坐标。然后以及他们所需要的移动函数。
玩家在被攻击后要进入短暂无敌状态，所以加入闪烁方法，闪烁期间不会和周围对象进行任何交互。
因为敌机被摧毁后要消失，因为在编写时一直没想到好的办法直接删除对象，所以我选择让敌机隐身并且和周围不进行任何交互。并在移动到终点时候逐个卸载。
子弹可以分为己方子弹和敌人子弹，为两个对象，只有在移动方向上有差别。
实体类声明部分：

玩家类：
``cpp
class Player {
private:
	int x;
	int y;
	int maxX;
	int maxY;
	int flash_timer= 0;
	int flashtime;
public:
	const string s = "■";
	Player(int maxY, int maxX,int flashtime);
	bool print(int y1, int x1);
	void left();
	void right();
	int getx();
	int gety();
	void up();
	void down();
	void Flash();
	void flashing();
	bool getflash();
};
``

敌人类：
``cpp
class Enemy {
private:
	int x;
	int y;
public:
	bool live = 1;//检测敌人是否存活
	Enemy(int max);
	int getx();
	int gety();
	bool print(int y1, int x1);
	bool move();
	void kill();
};
``
子弹类：
``cpp
class Bullet {
private:
	int y;
	int x;
	int x0;
	int y0;

public:
	bool isshoot = 1;//是检测子弹是否击中
	Bullet(int x, int y);
	void set(int x, int y);
	bool print(int x1, int y1);
	bool move();
	bool emove();
	int getx();
	int gety();
	void shoot();
};
``

更新函数： 
负责程序内所有对象间的交互和对象的更新（移动等）。依次为敌人被子弹击中，玩家被子弹击中，玩家闪烁，玩家射击，子弹射击（生成）与移动和销毁，敌人生成以及与玩家间的交互以及最后的销毁。玩家移动部分在主函数内，因为要读取键盘输入。


### 2.2.	渲染
渲染分为三个函数，三个函数实现方法相似。都为依次检测该渲染的字符。然后因为要渲染长串字符，单纯用if的话代码量会很大。所以一次性输出，并且直接让渲染指针（实际不为指针，单纯为类比）向后移动相当于字符长度的像素。
敌人和玩家都不是一个像素的实体，所以在玩家和敌人类中都有一个print方法，检测像素是否在实体内。如果在就输出实体对应字符。


### 2.3.	程序结构
我将程序分为数个文件，分别为不定义类的主文件，以及各个实体类。
在主文件中有整个程序通用的常数，可以方便修改参数。以及全局变量，这些变量有些本来为常量，但是后来加入了模式切换功能，所以允许玩家自己修改部分数值。当然在里面我加了一点奇怪的模式。
主函数内定义所有对象。进入两个循环，一个负责游戏重新开始，一个负责游戏内所需要的循环，比如读取、渲染等内容。并且在主函数内调用更新以及渲染函数。


## 3.	总结
整个程序并不大，我对代码也进行了多次修改，加入了足够的（应该吧）注释。然后在程序完成大部分内容的时候为了增加可读性然后对大部分变量名都进行修改。因为注释的缺失，当时修改确实很麻烦。可读性提高可以使程序整体的维护难度下降很多。
